<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="moreToMoreTables.mapper.UserGroupMapper">
    <parameterMap id="parameterUserGroupMap" type="moreToMoreTables.pojo.UserGroup">
        <parameter property="userId"/>
        <parameter property="groupId"/>
    </parameterMap>

    <insert id="insertUserGroup" parameterMap="parameterUserGroupMap">
        insert into user_group (user_id, group_id) values (#{userId}, #{groupId})
    </insert>

    <!--Accoring the groupId , return all users-->
    <resultMap id="resultUserMap_2" type="moreToMoreTables.pojo.User">
        <result property="id" column="id"/>
        <result property="username" column="username"/>
        <result property="mobile" column="mobile"/>
    </resultMap>

    <select id="getUsersByGroupId" resultMap="resultUserMap_2" parameterType="int">
        select u.*, ug.group_id from user1 u, user_group ug where u.id=ug.user_id and ug.group_id=#{group_id}
    </select>


    <resultMap id="resultGroupMap_2" type="moreToMoreTables.pojo.Group">
        <result property="groupId" column="group_id"/>
        <result property="groupName" column="group_name"/>
    </resultMap>

    <select id="getGroupsByUserId" resultMap="resultGroupMap_2" parameterType="int">
        select g.*, ug.user_id from `group` g, user_group ug where g.group_id=ug.group_id and ug.user_id=#{user_id}
    </select>
</mapper>